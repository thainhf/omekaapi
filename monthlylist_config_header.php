<?php$date1 = date('Y-m-d H:i:s');$timestamp1 = strtotime($date1);//$date = new DateTime('now', new DateTimeZone('Asia/Bangkok'));//echo $date->format('Y-m-d H:i:s');//echo "|".$date->format('H:i:s')."|";//$date1 = $date->format('H:i:s');//echo "|date1=".$date1."|1<br>";//$startTime = new DateTime($date);//$timestamp_one_hour_later = $timestamp1 + 3600;//echo "|date2=".$timestamp_one_hour_later."|<br>";//echo "<br>3|date3=".strftime('%H:%M:%S', $timestamp_one_hour_later);//$date_end = date('Y-m-d H:i:s', strtotime(' + 3 hours'));//echo "0=date_start=".$date_start."|date_end=".$date_end."|";//echo $date_start;//echo "|3<br>";//$date_current = $date->format('YmdHis');session_start();//$callapi = "Y";$_SESSION["callapi"]="Y";if (!isset($_SESSION['time_start'])) {    $date_start = date('Y-m-d H:i:s');    $date_end = date('Y-m-d H:i:s', strtotime(' + 10 second'));    $_SESSION["time_start"] = $date_start;    $_SESSION["time_end"] = $date_end;    $_SESSION["callapi"] = "Y"; //   $callapi = "Y";    $_SESSION['ssArray']=array(); //   $_SESSION["param"] = "11";   // $_SESSION["param"] = "sdfsdfsdfdsf";   // echo "SESSION param=".$_SESSION["param"] ; //   $_SESSION["crtm"] = ""; //   $_SESSION["limitpermonth"] = "";    //  echo "|1=date_start=". $_SESSION["time_start"]."|date_end=".$_SESSION["time_end"]."|";}/*if (isset($_SESSION['time_start']) && $_SESSION['time_start'] != "" ) {   // $date_start = date('Y-m-d H:i:s');  //  $date_end = date('Y-m-d H:i:s', strtotime(' + 1 second'));   // $_SESSION["time_start"] = $date_start;  //  $_SESSION["time_end"] = $date_end;    $time_start_stamp1 = strtotime($_SESSION["time_start"]);    $time_end_stamp1 = strtotime($_SESSION["time_end"]);   // echo "timestamp1=".$timestamp1.">".$time_end_stamp1."|";    if($timestamp1 >$time_end_stamp1 ){       // echo "call->api";        $date_start = date('Y-m-d H:i:s');        $date_end = date('Y-m-d H:i:s', strtotime(' + 10 second'));     //   $_SESSION["time_start"] = $date_start;      //  $_SESSION["time_end"] = $date_end;        $_SESSION["time_start"] = "";        $_SESSION["time_end"] = "";        $_SESSION["callapi"] = "Y";     //   $callapi = "Y";       // $_SESSION['ssArray']=array();       // session_start();      //  session_destroy();    }else{        $time_end_stamp1 = strtotime($_SESSION["time_end"]);     //   $time_start_stamp1 = strtotime($_SESSION["time_start"]);       // echo "no->call->api";      //  $callapi = "N";        $_SESSION["callapi"] = "N";    }   // $_SESSION["time_end"] = $date_current;}*///session_write_close();/*เราสามารถกำหนดเวลาให้ ตัวแปร SESSION หมดอายุได้ ด้วย ฟังก์ชันini_set(session.gc_maxlifetime, 1800);1800 คือจำนวนวินาทีของตัวแปร SESSION ว่าต้องการให้ตัวแปร SESSION นั้นอยู่ได้นานแค่ไหนหาก ฟังก์ชันข้างต้นไม่สามารถทำงานได้ เราสามารถสร้างฟังก์ชันไว้ใช้งานเองแบบง่ายๆ ได้ ดังนี้*/// 10 คือจำนวนวินาทีที่ต้องการให้ตัวแปร SESSION หมดอายุ// สามารถกำหนดเป็น 30*60// หมายถึงกำหนดให้ตัวแปร SESSION หมดอายุภายใน 30 นาที// เช่น  setSessionTime(30*60);// ฟังก์ชันนี้สามารถนำไปใช้ในการกำหนดเวลาว่าให้ user ต้องทำการล็อกอิน// ใหม่ทุกๆ กี่นาทีหรือกี่วินาที หรือกี่ชั่วโมงก็ได้?><?php//echo $callapi;//exit();//echo '<pre>';//var_dump($_SESSION);//echo '</pre>';?>