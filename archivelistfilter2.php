<?phpinclude_once("config_url.php");//กำหนดค่า Access-Control-Allow-Origin ให้ เครื่อง อื่น ๆ สามารถเรียกใช้งานหน้านี้ได้// Replace 'YOUR_API_KEY' and 'YOUR_SEARCH_QUERY' with your actual API key and search query./*const apiKey = 'YOUR_API_KEY';const searchQuery = 'YOUR_SEARCH_QUERY';// Construct the API URL with the search query.const apiUrl = `/admin/find?q=${encodeURIComponent(searchQuery)}`;// Make a GET request to the Omeka S API.fetch(apiUrl, {  method: 'GET',  headers: {    'Authorization': `Bearer ${apiKey}`,    'Accept': 'application/json',  },}).then(response => response.json()).then(data => {  // Handle the API response data here.  console.log(data);}).catch(error => {  // Handle any errors.  console.error(error);});*///https://omeka.p-set.org/admin/find?q=ผู้อ่าน$searchQuery = 'คุยกับผู้อ่าน';$apiuser = 'supachai';$apiKey = 'UtDqbQ2yPkxkgmfW5ZAbHLDr2iJRBGA1';$api_url='https://omeka.p-set.org/admin/find?q='.$searchQuery.'&key='.$apiKey;$api_url='https://omeka.p-set.org/api/infos?fulltext_search='.$searchQuery.'&key=UtDqbQ2yPkxkgmfW5ZAbHLDr2iJRBGA1';function cal_curl_api($api_url,$apiKey){    $data = [        'key_identity' => $apiKey,        'key_credential' => '', // Leave this empty for API keys without a secret    ];    $curl = curl_init($api_url);    curl_setopt($curl, CURLOPT_URL, $api_url);    curl_setopt($curl, CURLOPT_RETURNTRANSFER, true);    $headers = array(        "Authorization: Basic ".$apiKey,        "Accept: application/json",    );    curl_setopt($curl, CURLOPT_HTTPHEADER, $headers);    //for debug only!    curl_setopt($curl, CURLOPT_SSL_VERIFYHOST, false);    curl_setopt($curl, CURLOPT_SSL_VERIFYPEER, false);    $resp = curl_exec($curl);    curl_close($curl);    //var_dump($resp);    $words_f = ["o:", "dcterms:", ":tag", "o-module-folksonomy", "@value"];    $words_r   = ["o_", "dcterms_", "_tag", "o_module_folksonomy", "a_value"];    $resp = str_replace($words_f,$words_r,$resp);    $json_obj    = json_decode($resp);    // return $api_url;    return $json_obj;}///admin/find$json_objekat = cal_curl_api($api_url,$apiKey);$dataArray= array();        echo "<pre>999=";        print_r($json_objekat);        echo "</pre>";        $api_url='https://omeka.p-set.org/api/users/1';// Replace 'YOUR_API_ENDPOINT', 'YOUR_KEY_IDENTITY', and 'YOUR_KEY_CREDENTIAL' with your actual values.$apiEndpoint = 'http://ec2-18-139-29-204.ap-southeast-1.compute.amazonaws.com/admin/find?q=' . urlencode($searchQuery);$apiKey = 'UtDqbQ2yPkxkgmfW5ZAbHLDr2iJRBGA1';$apiEndpoint = 'http://ec2-18-139-29-204.ap-southeast-1.compute.amazonaws.com/admin/find?q=';$apiKey = 'supachai';$apiSecret = 'UtDqbQ2yPkxkgmfW5ZAbHLDr2iJRBGA1';// Create a cURL handle.$ch = curl_init();// Set cURL options.curl_setopt($ch, CURLOPT_URL, $apiEndpoint);curl_setopt($ch, CURLOPT_HTTPHEADER, [    'Authorization: Basic ' . base64_encode($apiKey . ':' . $apiSecret),    'Accept: application/json',]);curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);// Execute the cURL request.$response = curl_exec($ch);// Check for errors and handle the response.if (curl_errno($ch)) {    echo 'Curl error: ' . curl_error($ch);} else {    $data = json_decode($response, true);    // Handle the API response data here.    print_r($data);}// Close the cURL handle.curl_close($ch);/*// Replace 'YOUR_API_ENDPOINT', 'YOUR_API_KEY', and 'YOUR_SEARCH_QUERY' with your actual API endpoint, API key, and search query.$apiEndpoint = 'http://ec2-18-139-29-204.ap-southeast-1.compute.amazonaws.com/admin/find?q=' . urlencode($searchQuery);$apiKey = 'UtDqbQ2yPkxkgmfW5ZAbHLDr2iJRBGA1';// Initialize cURL session$ch = curl_init();// Set cURL optionscurl_setopt($ch, CURLOPT_URL, $apiEndpoint);curl_setopt($ch, CURLOPT_HTTPGET, true);curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);curl_setopt($ch, CURLOPT_HTTPHEADER, array(    'Authorization: Bearer ' . $apiKey,    'Accept: application/json',));// Execute the cURL request$response = curl_exec($ch);// Check for cURL errorsif (curl_errno($ch)) {    echo 'Curl error: ' . curl_error($ch);} else {    // Handle the API response    $data = json_decode($response, true);    print_r($data);    // Check if the request was successful    if (isset($data['success']) && $data['success'] === true) {        // Process the search results here        print_r($data);    } else {        // Handle API error        echo 'API Error: ' . $data['message'];    }}// Close the cURL sessioncurl_close($ch);*/// Replace 'YOUR_API_ENDPOINT', 'YOUR_USERNAME', and 'YOUR_PASSWORD' with your actual API endpoint, username, and password.$apiEndpoint = 'https://omeka.p-set.org/auth/token';$username = 'supachaiytk@gmail.com';$password = 'supachai2023';// Create a cURL handle.$ch = curl_init();// Set cURL options for authentication request.curl_setopt($ch, CURLOPT_URL, $apiEndpoint);curl_setopt($ch, CURLOPT_POST, true);curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);curl_setopt($ch, CURLOPT_POSTFIELDS, http_build_query([    'username' => $username,    'password' => $password,]));// Execute the cURL request.$response = curl_exec($ch);// Check for cURL errors.if (curl_errno($ch)) {    echo 'Curl error: ' . curl_error($ch);} else {    // Handle the API response.    $data = json_decode($response, true);    // Check if the request was successful.    if (isset($data['token'])) {        $token = $data['token'];        // Use the obtained token for subsequent API requests.        echo 'Authentication Successful. Token: ' . $token;    } else {        // Handle authentication failure.        echo 'Authentication Failed. Error: ' . $data['error'];    }}// Close the cURL handle.curl_close($ch);// Replace 'YOUR_API_KEY' with your actual API key$apiKey = '1aa12413dc8950777479a1a984a98009470d7b22';// Replace 'YOUR_OMEGA_URL' with your Omeka Classic site's base URL$baseUrl = 'https://archives.nrct.go.th/histdept';//supachai.ch	1aa12413dc8950777479a1a984a98009470d7b22// Construct the login request data$data = [    'key_identity' => $apiKey,    'key_credential' => '', // Leave this empty for API keys without a secret];// Initialize cURL session$ch = curl_init($baseUrl . '/api/');// Set cURL options for the login requestcurl_setopt($ch, CURLOPT_RETURNTRANSFER, true);curl_setopt($ch, CURLOPT_POST, true);curl_setopt($ch, CURLOPT_POSTFIELDS, json_encode($data));curl_setopt($ch, CURLOPT_HTTPHEADER, [    'Content-Type: application/json',]);//// Execute the cURL request$response = curl_exec($ch);// Check for errorsif (curl_errno($ch)) {    echo '<br>Error: ' . curl_error($ch);} else {    // Parse the JSON response    $responseData = json_decode($response, true);    // Handle the response data, which may include a session token    echo '<br>';    print_r($responseData);}// Close cURL sessioncurl_close($ch);//https://archives.nrct.go.th/histdept/api/items?page=1&per_page=50//https://archives.nrct.go.th/histdept/api/items?page=2&per_page=20/*$baseUrl='https://omeka.p-set.org';$ch = curl_init($baseUrl . '/api/users/1');// Set cURL options for the login requestcurl_setopt($ch, CURLOPT_RETURNTRANSFER, true);curl_setopt($ch, CURLOPT_POST, true);curl_setopt($ch, CURLOPT_POSTFIELDS, json_encode($data));curl_setopt($ch, CURLOPT_HTTPHEADER, [    'Content-Type: application/json',]);// Execute the cURL request$response = curl_exec($ch);*/// Check for errors/*if (curl_errno($ch)) {    echo '<br>Error: ' . curl_error($ch);} else {    // Parse the JSON response    $responseData = json_decode($response, true);    // Handle the response data, which may include a session token    echo '<br>';    print_r($responseData);}*////admin/find$apiKey = '1aa12413dc8950777479a1a984a98009470d7b22';$api_url='https://archives.nrct.go.th/histdept/api/users/1';$api_url='https://archives.nrct.go.th/histdept/api/?key='.$apiKey;$json_objekat = cal_curl_api($api_url,$apiKey);$dataArray= array();        echo "<pre>999=";        print_r($json_objekat);        echo "</pre>";?>