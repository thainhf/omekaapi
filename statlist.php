<?php//กำหนดค่า Access-Control-Allow-Origin ให้ เครื่อง อื่น ๆ สามารถเรียกใช้งานหน้านี้ได้include_once("config_header.php");?><?php$requestMethod = $_SERVER["REQUEST_METHOD"];include_once("custom_function.php");//==========================include_once("config_url.php");//==========================//ตรวจสอบหากใช้ Method GET$dataArray = array();$dataArray2 = array();            $vomekas_url = $config["omekas_url"];/* นับจำนวนไฟล์เอกสารที่อ่านอย่างเดียวhttp://ec2-18-139-29-204.ap-southeast-1.compute.amazonaws.com/admin/item?resource_template_id[]=2&site_id=1&sort_by=created&sort_order=desc&datetime[0][joiner]=and&datetime[0][field]=created&datetime[0][type]=gte&datetime[0][value]=&media_types[]=application/msword&media_types[]=application/pdf&media_types[]=application/rtf&media_types[]=application/vnd.ms-powerpoint&media_types[]=application/vnd.openxmlformats-officedocument.presentationml.presentation&media_types[]=application/vnd.openxmlformats-officedocument.spreadsheetml.sheet&media_types[]=application/vnd.openxmlformats-officedocument.wordprocessingml.document&datetime[0][joiner]=and&datetime[0][field]=created&datetime[0][type]=gte&datetime[0][value]=&is_public=1&has_media=&has_original=&has_thumbnails=&has_tags=0?resource_template_id[]=2&site_id=1&sort_by=created&sort_order=desc&datetime[0][joiner]=and&datetime[0][field]=created&datetime[0][type]=gte&datetime[0][value]=&media_types[]=application/msword&media_types[]=application/pdf&media_types[]=application/rtf&media_types[]=application/vnd.ms-powerpoint&media_types[]=application/vnd.openxmlformats-officedocument.presentationml.presentation&media_types[]=application/vnd.openxmlformats-officedocument.spreadsheetml.sheet&media_types[]=application/vnd.openxmlformats-officedocument.wordprocessingml.document&datetime[0][joiner]=and&datetime[0][field]=created&datetime[0][type]=gte&datetime[0][value]=&is_public=1&has_media=&has_original=&has_thumbnails=&has_tags=0//LINK API//http://ec2-18-139-29-204.ap-southeast-1.compute.amazonaws.com/api/items?//http://ec2-18-139-29-204.ap-southeast-1.compute.amazonaws.com/api/infos?//http://ec2-18-139-29-204.ap-southeast-1.compute.amazonaws.com/admin/media/6152/edit#resource-values//ค้นหาจากมีเดียhttp://ec2-18-139-29-204.ap-southeast-1.compute.amazonaws.com/admin/media?resource_class_id[]=34&resource_template_id[]=2&datetime[0][joiner]=and&datetime[0][field]=created&datetime[0][type]=gte&datetime[0][value]=&datetime[0][joiner]=and&datetime[0][field]=created&datetime[0][type]=gte&datetime[0][value]=&is_public=&has_original=&has_thumbnails=&has_tags=0api ==1http://ec2-18-139-29-204.ap-southeast-1.compute.amazonaws.com/api/infos?resource_class_id[]=34&resource_template_id[]=2&datetime[0][joiner]=and&datetime[0][field]=created&datetime[0][type]=gte&datetime[0][value]=&datetime[0][joiner]=and&datetime[0][field]=created&datetime[0][type]=gte&datetime[0][value]=&is_public=&has_original=&has_thumbnails=&has_tags=0*/////http://ec2-18-139-29-204.ap-southeast-1.compute.amazonaws.com/api/infos/media?/// PDF$api_url1 = $vomekas_url . "infos/media?media_types[]=application/pdf&datetime[0][joiner]=and&datetime[0][field]=created&datetime[0][type]=gte&datetime[0][value]=&datetime[0][joiner]=and&datetime[0][field]=created&datetime[0][type]=gte&datetime[0][value]=&is_public=1&has_original=&has_thumbnails=&has_tags=0";$json_objekat1 = cal_curl_api($api_url1);$documents=0;if(!empty($json_objekat1)) {    $documents=$json_objekat1->total;}//DOC$api_url1 = $vomekas_url . "infos/media?media_types[]=application/msword&sort_by=created&sort_order=desc&datetime[0][joiner]=and&datetime[0][field]=created&datetime[0][type]=gte&datetime[0][value]=&datetime[0][joiner]=and&datetime[0][field]=created&datetime[0][type]=gte&datetime[0][value]=&is_public=1&has_original=&has_thumbnails=&has_tags=0";$json_objekat1 = cal_curl_api($api_url1);//$documents=0;if(!empty($json_objekat1)) {    $documents=$documents+$json_objekat1->total;}//PPT$api_url1 = $vomekas_url . "infos/media?media_types[]=application/vnd.ms-powerpoint&sort_by=created&sort_order=desc&datetime[0][joiner]=and&datetime[0][field]=created&datetime[0][type]=gte&datetime[0][value]=&datetime[0][joiner]=and&datetime[0][field]=created&datetime[0][type]=gte&datetime[0][value]=&is_public=1&has_original=&has_thumbnails=&has_tags=0";$json_objekat1 = cal_curl_api($api_url1);//$documents=0;if(!empty($json_objekat1)) {    $documents=$documents+$json_objekat1->total;}//http://ec2-18-139-29-204.ap-southeast-1.compute.amazonaws.com/admin/media?media_types[]=application/vnd.ms-powerpoint&sort_by=created&sort_order=desc&datetime[0][joiner]=and&datetime[0][field]=created&datetime[0][type]=gte&datetime[0][value]=&datetime[0][joiner]=and&datetime[0][field]=created&datetime[0][type]=gte&datetime[0][value]=&is_public=1&has_original=&has_thumbnails=&has_tags=0//นับจำนวนไฟล์ภาพ .jpeg + .png +$api_url2 = $vomekas_url . "infos/media?media_types[]=image/jpeg&media_types[]=image/png&datetime[0][joiner]=and&datetime[0][field]=created&datetime[0][type]=gte&datetime[0][value]=&datetime[0][joiner]=and&datetime[0][field]=created&datetime[0][type]=gte&datetime[0][value]=&is_public=&has_original=&has_thumbnails=&has_tags=0";$json_objekat2 = cal_curl_api($api_url2);$photos=0;if(!empty($json_objekat2)) {    $photos=$json_objekat2->total;}//นับจำนวนไฟล์เสียง audio/mpeg audio/mpeg$api_url3 = $vomekas_url . "infos/media?media_types[]=audio/mpeg&sort_by=created&sort_order=desc&datetime[0][joiner]=and&datetime[0][field]=created&datetime[0][type]=gte&datetime[0][value]=&datetime[0][joiner]=and&datetime[0][field]=created&datetime[0][type]=gte&datetime[0][value]=&is_public=&has_original=&has_thumbnails=&has_tags=0";$json_objekat3 = cal_curl_api($api_url3);$sounds=0;if(!empty($json_objekat3)) {    $sounds=$json_objekat3->total;}//นับจำนวนไฟล์ภาพเคลื่อนไหว//.mp4 + .mov + …$api_url4 = $vomekas_url . "infos/media?media_types[]=video/mp4&sort_by=created&sort_order=desc&datetime[0][joiner]=and&datetime[0][field]=created&datetime[0][type]=gte&datetime[0][value]=&datetime[0][joiner]=and&datetime[0][field]=created&datetime[0][type]=gte&datetime[0][value]=&is_public=&has_original=&has_thumbnails=&has_tags=0";$json_objekat4 = cal_curl_api($api_url4);$videos=0;if(!empty($json_objekat4)) {    $videos=$json_objekat4->total;}//http://ec2-18-139-29-204.ap-southeast-1.compute.amazonaws.com/admin/media?resource_class_id[]=34&sort_by=created&sort_order=desc&datetime[0][joiner]=and&datetime[0][field]=created&datetime[0][type]=gte&datetime[0][value]=&datetime[0][joiner]=and&datetime[0][field]=created&datetime[0][type]=gte&datetime[0][value]=&is_public=&has_original=&has_thumbnails=&has_tags=0//นับ vdo ที่เป็น link youtube//http://ec2-18-139-29-204.ap-southeast-1.compute.amazonaws.com/api/infos/media?resource_class_id[]=34&sort_by=created&sort_order=desc&datetime[0][joiner]=and&datetime[0][field]=created&datetime[0][type]=gte&datetime[0][value]=&datetime[0][joiner]=and&datetime[0][field]=created&datetime[0][type]=gte&datetime[0][value]=&is_public=&has_original=&has_thumbnails=&has_tags=0$api_url5 = $vomekas_url . "infos/media?resource_class_id[]=56&datetime[0][joiner]=and&datetime[0][field]=created&datetime[0][type]=gte&datetime[0][value]=&datetime[0][joiner]=and&datetime[0][field]=created&datetime[0][type]=gte&datetime[0][value]=&is_public=&has_original=&has_thumbnails=&has_tags=0";$json_objekat5 = cal_curl_api($api_url5);$videos5=0;if(!empty($json_objekat5)) {    $videos5=$json_objekat5->total;    $videos=$videos+$videos5;}$data=array(    "documents"=>$documents,    "photos"=>$photos,    "sounds"=>$sounds,    "videos"=>$videos,);            echo json_encode($data);            //=========end===================================?>