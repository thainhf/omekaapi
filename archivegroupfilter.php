<?php//กำหนดค่า Access-Control-Allow-Origin ให้ เครื่อง อื่น ๆ สามารถเรียกใช้งานหน้านี้ได้include_once("config_header.php");?><?php$requestMethod = $_SERVER["REQUEST_METHOD"];include_once("custom_function.php");//==========================include_once("config_url.php");//==========================//ตรวจสอบหากใช้ Method GET$dataArray = array();$dataArray2 = array();        //ตรวจสอบการส่งค่า id        if(isset($_GET['class']) && !empty($_GET['class'])){            $filter = $_GET['class'];            $filter_cates="";            if(!empty($filter)){                $vfilter=$filter;                $filter_array = explode(',', $vfilter );                $cat_no="";                foreach ($filter_array as $key => $tag ) {                    if($tag=="Collection"){                        $cat_no="23";                    }elseif($tag=="Dataset"){                        $cat_no="24";                    }elseif($tag=="Event"){                        $cat_no="25";                    }elseif($tag=="Image"){                        $cat_no="26";                    }                    $filter_cates= $filter_cates."&resource_class_id[]=".$cat_no;                }            }else{                $vfilter="";            }            $vomekas_url = $config["omekas_url"];            $api_url = $vomekas_url . "item_sets?limit=0&offset=0".$filter_cates ;            $json_objekat = cal_curl_api($api_url);            if(!empty($json_objekat)) {                foreach ($json_objekat as $objQuote) {                    $o_id = $objQuote->o_id;                    $o_title = $objQuote->o_title;                    $o_resource_class_arr = $objQuote->o_resource_class;                    if($o_resource_class_arr->o_id == 23){                        $tag="Collection";                    }elseif($o_resource_class_arr->o_id == 24){                        $tag="Dataset";                    }elseif($o_resource_class_arr->o_id == 25){                        $tag="Event";                    }elseif($o_resource_class_arr->o_id == 26){                        $tag="Image";                    }//                echo "<pre>999=";//                print_r($json_objekat);//                echo "</pre>";                    // if($o_resource_class_arr->o_id == 23 && $o_id != 2630 ){                    $data = array(                        "id" => $o_id,                        "title" => $o_title,                        "type" => $tag,                    );                    array_push($dataArray, $data);                    //  }                }            }            echo json_encode($dataArray);            //=========end===================================        }else{            $response = ['n.d.'];            echo json_encode($response);        }?>